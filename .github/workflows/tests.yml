name: Unit testings

on:
  workflow_run:
    workflows: ["Build debian package"]
    types:
      - completed

jobs:
  install:
    name: "Install configurator"
    runs-on: ubuntu-latest

    steps:
      - name: "Add repository"
        run: |
          sudo wget -qO- https://imola.armbian.com/apt/armbian.key | \
          gpg --dearmor | sudo tee /usr/share/keyrings/armbian.gpg > /dev/null
          sudo echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/armbian.gpg] \
          https://armbian.github.io/configurator stable main" \
          | sudo tee /etc/apt/sources.list.d/armbian-development.list > /dev/null
          sudo apt update
          sudo apt-get -y install configurator
          
  run:
    name: "Run configurator commands"
    runs-on: ubuntu-latest

    steps:
      - name: "Run tests"
        run: |
          echo "Hello world"
